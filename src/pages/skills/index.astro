---
import Page from "@/layouts/Page.astro";
import { getCollection } from "astro:content";
import { SideBySidePageContent } from "@/components/side-by-side-page-content";
import type { Render } from "astro:content";
import type { SkillType } from "@/content/config";

type RenderedEntryComponent = Awaited<Render[".md"]>;
type Content = {
  Content: RenderedEntryComponent["Content"];
  frontmatter: SkillType;
};

const allSkills = await getCollection("skills");
const content: Content[] = [];
for (const skill of allSkills) {
  const { Content, remarkPluginFrontmatter: frontmatter } = await skill.render();
  content.push({ Content, frontmatter: frontmatter as SkillType });
}
---

<Page title="NicoToff | Skills">
  {
    content.map(({ Content, frontmatter }) => (
      <SideBySidePageContent className="mt-8 gap-4 first:mt-0" image={frontmatter.image}>
        <Content />
      </SideBySidePageContent>
    ))
  }
</Page>
